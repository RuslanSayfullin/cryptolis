{% extends "appmain/base.html" %}
{% load static %}

{% block content %}
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="row">
                    <div class="col-md-8 col-md-offset-2">
                        <br>
                        <h3 class="text-muted">Данные клиента</h3>
                        <br>
                        <form role="form" id="form_new_offer" class="form-horizontal" method="post"
                              enctype="multipart/form-data" action="{% url 'new_reckoning_url' %}" onkeypress="if(event.keyCode == 13) return false;">
                            {% csrf_token %}

                            <div class="form-group {% if form.designer.errors %}has-error{% endif %}">
                                <label for="designer" class="col-md-3 control-label">Дизайнер</label>
                                <div class="col-md-5">
                                    {{ form.designer }}
                                </div>
                            </div>

                            <div class="form-group {% if form.client_data.errors %}has-error{% endif %}">
                                <label for="client_data" class="col-md-3 control-label">Юр.название /Имя клиента</label>

                                <div class="col-md-5">
                                    <input type="text" class="form-control" id="client_data" name="client_data"
                                           value="{{ form.client_data.value }}" autofocus/>
                                </div>
                            </div>

                            <div class="form-group {% if form.phone.errors %}has-error{% endif %}">
                                <label for="phone" class="col-md-3 control-label">Телефон клиента</label>

                                <div class="col-md-3">
                                    <input type="text" class="form-control" id="phone" name="phone"
                                           {% if form.phone_client.value %}
                                           data-inputmask="'mask': '+9(999) 9999-999'"
                                           {% else %}
                                           data-inputmask="'mask': '+7(999) 9999-999'"
                                           {% endif %}
                                           value="{{ form.phone.value }}"/>
                                </div>
                            </div>

                            <div class="form-group {% if form.date.errors %}has-error{% endif %}">
                                <label for="date" class="col-md-3 control-label">Время замера</label>

                                <div class="col-md-4">
                                    <div class="input-group">
                                        <span class="input-group-addon"><span class="glyphicon glyphicon-calendar" aria-hidden="true"></span></span>
                                        <input type="text" class="form-control" id="date" name="date" value="{{ form.date.value }}"/>
                                    </div>
                                    {% for error in form.date.errors %}<span class="text-danger">{{ error|escape }}</span>{% endfor %}
                                </div>
                            </div>
                            <br>
                            <div class="form-group text-right">
                                <div class="col-md-3 col-md-offset-2">
                                    <input type="submit" class="btn btn-primary" value="Сохранить"/>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock content %}
<link href="{% static "datetimepicker/jquery.datetimepicker.css" %}" type="text/css" media="all" rel="stylesheet"/>
<script type="text/javascript" src="{% static "datetimepicker/jquery.datetimepicker.js" %}"></script>
<script type="text/javascript">
    $("input[name='date']").datetimepicker({
      'lang': 'ru',
      'dayOfWeekStart': 1,
      'format': "d.m.Y",
      'closeOnDateSelect': true,
      'timepicker': false,
      'minDate': "{% now "d.m.Y" %}",
      'scrollInput': false,
      'scrollMonth': false
    });
</script>